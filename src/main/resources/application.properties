# Configuraci贸n de la base de datos MariaDB
spring.application.name=healthyhabits

spring.datasource.driver-class-name=org.mariadb.jdbc.Driver
spring.datasource.url=jdbc:mariadb://localhost:3306/${MARIADB_DATABASE}
spring.datasource.username=${MARIADB_USER}
spring.datasource.password=${MARIADB_PASSWORD}

spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:false}
spring.jpa.open-in-view=false
spring.datasource.hikari.initialization-fail-timeout=-1

# Optimizaci贸n de inserts en lote (mejor rendimiento en siembras grandes)
spring.jpa.properties.hibernate.jdbc.batch_size=1000
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# (Opcional) Ajustes del pool Hikari para siembras largas
# spring.datasource.hikari.maximum-pool-size=10
# spring.datasource.hikari.minimum-idle=5
# spring.datasource.hikari.idle-timeout=30000
# spring.datasource.hikari.max-lifetime=1800000
# spring.datasource.hikari.connection-timeout=30000

# Configuraci贸n de GraphQL
spring.graphql.http.path=/graphql
spring.graphql.graphiql.enabled=true
spring.graphql.graphiql.cdn.enabled=true
spring.graphql.schema.locations=classpath:graphql/

# Niveles de log (menos ruido durante la siembra)
logging.level.org.springframework.security=INFO
logging.level.org.springframework.graphql=INFO
logging.level.graphql=INFO
logging.level.org.springframework.web=INFO

server.error.include-exception=true
server.error.include-message=always
management.endpoints.web.exposure.include=health,info,mappings,beans,conditions,configprops,env

# Seguridad
security.jwt.secret=${JWT_SECRET}
security.jwt.expiration-ms=${JWT_EXPIRATION_MS}
security.password.pepper=${PASSWORD_PEPPER}

# Configuraci贸n de administrador
app.admin.email=admin@healthyhabits.com
app.admin.password=${APP_ADMIN_PASSWORD}

# Seeder (controlado por variables de entorno)
app.seeder.enabled=${APP_SEEDER_ENABLED:true}
app.seeder.total-records=${APP_SEEDER_TOTAL_RECORDS:500}
app.seeder.batch-size=${APP_SEEDER_BATCH_SIZE:1000}
app.seeder.locale=${APP_SEEDER_LOCALE:es}
